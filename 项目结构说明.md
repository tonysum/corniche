# 项目结构说明

## 目录结构

```
corniche/
├── backend/              # 后端服务代码
│   ├── services/         # 微服务目录
│   │   ├── data_service/     # 数据服务
│   │   ├── backtest_service/ # 回测服务
│   │   ├── order_service/    # 订单服务
│   │   └── shared/          # 共享配置和工具
│   ├── *.py             # Python脚本文件
│   ├── requirements.txt
│   ├── Dockerfile.backend
│   └── ...
├── frontend/            # 前端代码（Next.js）
│   ├── app/             # Next.js应用目录
│   ├── components/      # React组件
│   ├── contexts/        # React Context
│   ├── lib/             # 工具库
│   ├── package.json
│   ├── Dockerfile
│   └── ...
└── data/                # 数据文件目录
    ├── crypto_data.db   # 主数据库文件
    ├── backtrade_records/ # 回测记录目录
    └── *.csv            # CSV数据文件
```

## 重要说明

### 数据库路径

- 数据库文件位于 `data/crypto_data.db`
- 在 Docker 容器中，通过环境变量 `DB_PATH` 指定数据库路径
- 默认路径：`/app/data/crypto_data.db`

### 服务端口

- 数据服务：8001
- 回测服务：8002
- 订单服务：8003
- 前端：3000

### Docker Compose

使用根目录下的 `docker-compose.yml` 启动所有服务：

```bash
docker-compose up -d
```

### 路径引用

- 后端代码中的数据库路径引用已更新为 `../data/crypto_data.db`（相对于backend目录）
- Docker 容器中通过 volume 挂载 `./data` 到 `/app/data`
- 所有服务的工作目录设置为 `/app`，数据库路径通过环境变量配置

## 迁移说明

本项目从 `top2` 项目迁移而来，主要变更：

1. **前后端分离**：前端代码独立到 `frontend/` 目录
2. **数据独立**：数据文件统一放在 `data/` 目录
3. **路径调整**：所有路径引用已更新以适应新结构

